{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Notification","message","messageStyle","className","Filter","filter","handleChange","value","onChange","PersonForm","handleSubmit","name","handleNameChange","number","handleNumberChange","onSubmit","type","Numbers","persons","handleDelete","map","person","key","Number","onClick","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setFilter","showAll","setShowAll","errorMessage","setErrorMessage","successMessage","setSuccessMessage","useEffect","personService","initialPersons","catch","error","showErrorMessage","setTimeout","showSuccessMessage","personsToShow","toUpperCase","includes","event","target","length","preventDefault","personObject","some","existingPerson","find","window","confirm","returnedPerson","hasOwnProperty","concat","nameToDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1003cb47.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\n//const baseUrl = 'http://localhost:3001/api/persons'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react'\r\nimport personService from './services/persons'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [filter, setFilter] = useState('')\r\n  const [showAll, setShowAll] = useState(true)\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [successMessage, setSuccessMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n      .catch(error => {\r\n        showErrorMessage(`Error retrieving phonebook from server`)\r\n      })\r\n  }, [])\r\n\r\n  const showErrorMessage = message => {\r\n    setErrorMessage(message)\r\n    setTimeout(() => {\r\n      setErrorMessage(null)\r\n    }, 5000)\r\n  }\r\n\r\n  const showSuccessMessage = message => {\r\n    setSuccessMessage(message)\r\n    setTimeout(() => {\r\n      setSuccessMessage(null)\r\n    }, 5000)\r\n  }\r\n\r\n  const handleNewName = event => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNewNumber = event => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilter = event => {\r\n    setShowAll(\r\n      (event.target.value.length > 0) ? false : true\r\n    )\r\n    setFilter(event.target.value)\r\n  }\r\n\r\n  const handleDeleteNumber = event => {\r\n    const id = event.target.value\r\n    const nameToDelete = persons.find(person => person.id === id).name\r\n    \r\n    if (window.confirm(`Delete ${nameToDelete} ?`)) {\r\n      personService\r\n        .remove(id)\r\n        .then(() => {\r\n          setPersons(persons.filter(person => person.id !== id))\r\n          showSuccessMessage(`Deleted '${nameToDelete}'`)\r\n        })\r\n        .catch(error => {\r\n          showErrorMessage(`Error deleting '${nameToDelete}' from server`)\r\n        })\r\n    }\r\n  }\r\n\r\n  const personsToShow = showAll\r\n    ? persons\r\n    : persons.filter(person => person.name.toUpperCase().includes(filter.toUpperCase()))\r\n\r\n  const addPerson = event => {\r\n    event.preventDefault()\r\n    \r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    if (persons.some(person => person.name === newName)) {\r\n      const existingPerson = persons.find(person => person.name === newName)\r\n      \r\n      if (window.confirm(`${newName} is already added to phonebook, replace old number with a new one?`)) {\r\n        personService\r\n        .update(existingPerson.id, personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(\r\n            persons.map(person => person.id !== existingPerson.id ? person : returnedPerson)\r\n          )\r\n          setNewName('')\r\n          setNewNumber('')\r\n          showSuccessMessage(`Updated '${newName}'`)\r\n        })\r\n        .catch(error => {\r\n          const message = error.response.data\r\n\r\n          if (message.hasOwnProperty('error')) {\r\n            showErrorMessage(message.error)\r\n          } else {\r\n            showErrorMessage(`Error adding '${newName}' to server`)\r\n          }\r\n        })\r\n      }\r\n    } else {\r\n      personService\r\n        .create(personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n          setNewName('')\r\n          setNewNumber('')\r\n          showSuccessMessage(`Added '${newName}'`)\r\n        })\r\n        .catch(error => {\r\n          const message = error.response.data\r\n\r\n          if (message.hasOwnProperty('error')) {\r\n            showErrorMessage(message.error)\r\n          } else {\r\n            showErrorMessage(`Error adding '${newName}' to server`)\r\n          }\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={errorMessage} messageStyle=\"error\" />\r\n      <Notification message={successMessage} messageStyle=\"success\" />\r\n      <Filter filter={filter} handleChange={handleFilter} />\r\n      <h3>add a new</h3>\r\n      <PersonForm handleSubmit={addPerson} name={newName} handleNameChange={handleNewName} number={newNumber} handleNumberChange={handleNewNumber} />\r\n      <h3>Numbers</h3>\r\n      <Numbers persons={personsToShow} handleDelete={handleDeleteNumber} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Notification = ({message, messageStyle}) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className={messageStyle}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Filter = ({filter, handleChange}) => {\r\n  return (\r\n    <div>filter shown with <input value={filter} onChange={handleChange} /></div>\r\n  )\r\n}\r\n\r\nconst PersonForm = ({handleSubmit, name, handleNameChange, number, handleNumberChange}) => {\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div>name: <input value={name} onChange={handleNameChange} /></div>\r\n      <div>number: <input value={number} onChange={handleNumberChange} /></div>\r\n      <div><button type=\"submit\">add</button></div>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst Numbers = ({persons, handleDelete}) => {\r\n  return (\r\n    <ul>\r\n      {persons.map(person => <Number key={person.name} person={person} handleDelete={handleDelete} />)}\r\n    </ul>\r\n  )\r\n}\r\n\r\nconst Number = ({person, handleDelete}) => {\r\n  return (\r\n    <li>\r\n      <div>{person.name} {person.number} <button value={person.id} onClick={handleDelete}>delete</button></div>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}